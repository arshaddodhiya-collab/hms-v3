<div class="min-h-screen flex relative lg:static surface-ground">
  <aside
    class="h-screen hidden lg:block flex-shrink-0 border-right-1 surface-border select-none shadow-2"
    style="width: 280px; background-color: var(--surface-card)"
  >
    <div class="flex flex-column h-full">
      <div class="flex align-items-center px-5 pt-3 mb-4" style="height: 60px">
        <div class="bg-primary border-round flex align-items-center justify-content-center mr-3" style="width: 32px; height: 32px">
            <i class="pi pi-box text-white"></i>
        </div>
        <span class="text-xl font-bold text-900 line-height-1">{{ appTitle }}</span>
      </div>

      <div class="overflow-y-auto flex-auto">
        <ng-container *ngTemplateOutlet="navMenu"></ng-container>
      </div>

      <div class="mt-auto border-top-1 surface-border p-3">
        <div class="flex align-items-center p-3 border-round hover:surface-100 transition-duration-150 cursor-pointer">
          <p-avatar image="https://primefaces.org/cdn/primeng/images/demo/avatar/amyelsner.png" shape="circle" class="mr-3"></p-avatar>
          <div class="flex flex-column">
            <span class="font-bold text-900 text-sm">User Name</span>
            <span class="text-600 text-xs">{{ userRole }}</span>
          </div>
          <button pButton icon="pi pi-sign-out" class="p-button-rounded p-button-text p-button-plain ml-auto" (click)="logout()"></button>
        </div>
      </div>
    </div>
  </aside>

  <p-sidebar [(visible)]="sidebarVisible" styleClass="w-20rem p-0" [showCloseIcon]="false">
    <div class="flex flex-column h-full">
      <div class="flex align-items-center justify-content-between px-4 pt-3 mb-4" style="height: 60px">
        <span class="text-xl font-bold text-primary">{{ appTitle }}</span>
        <button pButton icon="pi pi-times" class="p-button-rounded p-button-text p-button-plain" (click)="sidebarVisible = false"></button>
      </div>
      <div class="overflow-y-auto flex-auto">
        <ng-container *ngTemplateOutlet="navMenu; context: { mobile: true }"></ng-container>
      </div>
      <div class="mt-auto p-4 border-top-1 surface-border">
          <button pButton label="Logout" icon="pi pi-sign-out" class="p-button-outlined w-full" (click)="logout()"></button>
      </div>
    </div>
  </p-sidebar>

  <main class="min-h-screen flex flex-column relative flex-auto">
    <header
      class="flex justify-content-between align-items-center px-5 surface-card border-bottom-1 surface-border sticky top-0 z-5"
      style="height: 60px"
    >
      <div class="flex align-items-center">
        <button
          pButton
          class="p-button-text p-button-secondary lg:hidden mr-3"
          icon="pi pi-bars"
          (click)="sidebarVisible = true"
        ></button>
        <span class="text-600 font-medium hidden md:block">Welcome back, User!</span>
      </div>

      <div class="flex align-items-center gap-3">
        <button pButton icon="pi pi-bell" class="p-button-rounded p-button-text p-button-plain" pBadge value="2" severity="danger"></button>
        <div class="border-left-1 surface-border h-2rem mx-1"></div>
        <p-avatar icon="pi pi-user" shape="circle" styleClass="bg-primary-reverse text-primary"></p-avatar>
      </div>
    </header>

    <div class="p-4 md:p-6 flex flex-column flex-auto overflow-y-auto bg-gray-50">
      <div class="surface-card p-5 border-round shadow-1 flex-auto">
        <ng-content></ng-content>
      </div>
    </div>
  </main>
</div>

<ng-template #navMenu let-mobile="mobile">
  <ul class="list-none p-3 m-0">
    <li *ngFor="let item of menuItems" class="mb-1">
      <a
        pRipple
        [routerLink]="item.route"
        routerLinkActive="bg-primary text-0"
        [routerLinkActiveOptions]="{exact: true}"
        (click)="mobile ? sidebarVisible = false : null"
        class="flex align-items-center cursor-pointer p-3 border-round text-700 hover:surface-100 transition-duration-150 transition-colors w-full no-underline"
      >
        <i [class]="item.icon + ' mr-3 text-lg'"></i>
        <span class="font-semibold">{{ item.label }}</span>
      </a>
    </li>
  </ul>
</ng-template>