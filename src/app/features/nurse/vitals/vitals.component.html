<div class="card">
  <div class="flex justify-content-between align-items-center mb-4">
    <h5>Patient Vitals</h5>
    <button
      pButton
      label="Record Vitals"
      icon="pi pi-plus"
      (click)="showDialog()"
    ></button>
  </div>

  <p-table [value]="vitalsList" [tableStyle]="{ 'min-width': '50rem' }">
    <ng-template pTemplate="header">
      <tr>
        <th>Patient Name</th>
        <th>BP (mmHg)</th>
        <th>Pulse (bpm)</th>
        <th>Temp (Â°F)</th>
        <th>SpO2 (%)</th>
        <th>Time</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-vital>
      <tr>
        <td>{{ vital.patientName }}</td>
        <td>{{ vital.bp }}</td>
        <td>{{ vital.pulse }}</td>
        <td>{{ vital.temp }}</td>
        <td>
          <span
            [ngClass]="{
              'text-red-500 font-bold': vital.spo2 < 95,
              'text-green-500': vital.spo2 >= 95,
            }"
            >{{ vital.spo2 }}</span
          >
        </td>
        <td>{{ vital.timestamp }}</td>
      </tr>
    </ng-template>
  </p-table>

  <p-dialog
    header="Record Vitals"
    [(visible)]="displayAddDialog"
    [modal]="true"
    [style]="{ width: '400px' }"
  >
    <div class="flex flex-column gap-3">
      <div class="field">
        <label for="bp">Blood Pressure</label>
        <input
          pInputText
          id="bp"
          [(ngModel)]="newVital.bp"
          placeholder="e.g. 120/80"
          class="w-full"
        />
      </div>
      <div class="field">
        <label for="pulse">Pulse</label>
        <input
          pInputText
          id="pulse"
          [(ngModel)]="newVital.pulse"
          class="w-full"
        />
      </div>
      <div class="field">
        <label for="temp">Temperature</label>
        <input
          pInputText
          id="temp"
          [(ngModel)]="newVital.temp"
          class="w-full"
        />
      </div>
      <div class="field">
        <label for="spo2">SpO2</label>
        <input
          pInputText
          id="spo2"
          [(ngModel)]="newVital.spo2"
          class="w-full"
        />
      </div>
    </div>
    <ng-template pTemplate="footer">
      <button
        pButton
        label="Cancel"
        icon="pi pi-times"
        class="p-button-text"
        (click)="displayAddDialog = false"
      ></button>
      <button
        pButton
        label="Save"
        icon="pi pi-check"
        (click)="saveVital()"
      ></button>
    </ng-template>
  </p-dialog>
</div>
